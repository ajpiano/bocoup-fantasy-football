<html>
	<head>
		<title>Bocoup Fantasy Football</title>

 		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

		<link rel="shortcut icon" href="favico.ico"/>
		<link href="css/flick/jquery-ui-1.10.3.custom.css" rel="stylesheet">
		<link media="screen" rel="stylesheet" type="text/css" href="css/normalize.css"> 
		<link media="screen" rel="stylesheet" type="text/css" href="css/site.css"> 
	</head>

<body>
	<h1>Bocoup Fantasy Football</h1>
	<div id="tabs">
		<ul>
			<li><a href="#tabs-1">Available Players</a></li>
			<li><a href="#tabs-2">Teams</a></li>
		</ul>
		<div id="tabs-1">
			<input id="availableTableFilter" class="tableFilter" type="text" placeholder="filter by.."></input>
			<button class="clear">Clear</button>
			<div id="availablePlayersTable"></div>
		</div>
		<div id="tabs-2">
		</div>
	</div><!-- end wrapper -->

	<script type="text/javascript" src="js/ICanHaz.js"></script>
	<script type="text/javascript" src="js/lodash.js"></script>
	<script type="text/javascript" src='js/jquery.js'></script>
	<script type="text/javascript" src='js/jquery-ui.js'></script>
	<script type="text/javascript" src='js/tabletop.js'></script>
	<script type="text/javascript" src='js/sheetsee.js'></script>

	<script id="availablePlayersTable" type="text/html">
		<table>
			<tr>
				<th>Yahoo!<br />Rank</th>
				<th class="lt">Last Name</th>
				<th class="lt">First Name</th>
				<th>Team</th>
				<th>Pos</th>
			</tr>
		  {{#rows}}
		  	<tr id="{{rowNumber}}" class="spotRow">
		  		<td class="rt">{{rank}}</td>
		  		<td>{{lastname}}</td>
		  		<td>{{firstname}}</td>
		  		<td class="ctr cap">{{team}}</td>
		  		<td class="ctr">{{pos}}</td>
	  		</tr>
		  {{/rows}}
	  </table>
	</script>

	<script id="teamTable" type="text/html">
		<table class="teamTable">
			<thead>
				<tr>
					<th>Pos</th>
					<th>Last Name</th>
					<th>First Name</th>
					<th>Team</th>
					<th>Bye</th>
				</tr>
			</thead>
		</table>
	</script>

	<script id="teamTableBody" type="text/html">
		<tbody>
			<tr>
				<td>QB</td>
			</tr>
			<tr>
				<td>WR</td>
			</tr>
			<tr>
				<td>WR</td>
			</tr>
			<tr>
				<td>WR</td>
			</tr>
			<tr>
				<td>RB</td>
			</tr>
			<tr>
				<td>RB</td>
			</tr>
			<tr>
				<td>TE</td>
			</tr>
			<tr>
				<td>K</td>
			</tr>
			<tr>
				<td>DEF</td>
			</tr>
			<tr>
				<td>BN</td>
			</tr>
			<tr>
				<td>BN</td>
			</tr>
			<tr>
				<td>BN</td>
			</tr>
			<tr>
				<td>BN</td>
			</tr>
			<tr>
				<td>BN</td>
			</tr>
			<tr>
				<td>BN</td>
			</tr>
		</tbody>
	</script>

	<script type="text/javascript">
		$(function() {
		
	  	var URL = "0ArJmbb-pdH1sdDJHVTBmQmh5d0RRUjh4V2RWQlNORWc"
			Tabletop.init( { key: URL, callback: showInfo, simpleSheet: true } ) 

			$( "#tabs" ).tabs();

			$( '.clear' ).on('click', function(){
				$(this).closest( '.tableFilter' ).val('');
			});
		
		  function showInfo(data) {
		  	var gData = data;

		  	var availablePlayers = Sheetsee.getMatches(gData, '', 'draftedby');

		  	var teamTable = ich.teamTable();
		  	var teamTableBody = ich.teamTableBody();

		  	var teams = _.uniq( _.pluck( gData, 'draftedby' ) );

		  	$( '#tabs-2' ).html(teamTable);
		  	$( '.teamTable' ).append( $( teamTableBody ) );


		  	// make the table, and the search bar
		  	Sheetsee.makeTable(availablePlayers, "#availablePlayersTable");
		  	Sheetsee.initiateTableFilter(availablePlayers, "#availableTableFilter", "#availablePlayersTable");

		  	// when someone clicks on a row, highlight it and
		  	// re-center the map
		  	// $('.spotRow').live("click", function(event) {
		  	// 	$('.spotRow').removeClass("selectedRow")
		 		// 	var rowNumber = $(this).closest("tr").attr("id")
		 		// 	$('#' + rowNumber).addClass("selectedRow")
		 		// 	var dataElement = Sheetsee.getMatches(gData, rowNumber, "rowNumber")
		 		// 	var selectedSpot = ich.selectedSpot({
					//   rows: dataElement
				 //  })
				 //  $('#latestSpot').css("display", "none")
				 //  $('#selectedSpot').html(selectedSpot).css("display", "inline")
		 		// })

		 	}
		});

	</script>
</body>
</html>
